{"version":3,"sources":["mobilebone.js"],"names":[],"mappings":"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","file":"mobilebone-compiled.js","sourcesContent":["/*\n * mobilebone.js\n * by zhangxinxu(.com) 2014-09-26\n * https://github.com/zhangxinxu/mobilebone\n * bone of switch for mobile web app \n**/\n\n(function(root, factory) {\n\tif (document.MBLOADED) { return; }\n\t// Set up Mobilebone appropriately for the environment.\n\tif (typeof define === 'function' && (define.amd || define.cmd)) {\n\t\tdefine('mobilebone', function() {\n\t\t\treturn factory(root, {});\n\t\t});\n\t// Finally, as a browser global.\n\t} else {\n\t\troot.Mobilebone = factory(root, {});\n\t}\n})(this, function(root, Mobilebone) {\n\tif (document.MBLOADED) {\n\t\treturn 'Don\\'t repeat load Mobilebone!';\n\t}\n\t\n\t// Avoid repeated callbacks\n\tvar store = {};\n\t\n\t// Create local references to array methods we'll want to use later.\n\tvar array = [];\n\tvar slice = array.slice;\n\t\n\t// Is it a id selector\n\tvar isSimple = /^#?\\w+(?:[\\-_]\\w+)*$/i;\n\t\n\t// Is it webkit\n\tvar isWebkit = 'WebkitAppearance' in document.documentElement.style || typeof document.webkitHidden != \"undefined\";\n\t\n\t// Is it suppory history API\n\tvar supportHistory = \"pushState\" in history && \"replaceState\" in history;\n\t\t\n\tMobilebone.support = supportHistory;\n\t\n\tvar hasInited = false;\n\t\n\t/**\n\t * Current version of the library. Keep in sync with `package.json`.\n\t *\n\t * @type string\n\t**/\n\tMobilebone.VERSION = '2.6.0';\n\t\n\t/**\n\t * Whether catch attribute of href from element with tag 'a'\n\t * If the value set to false, jump links in a refresh form(not slide)\n\t * In most cases, you do not need to care about this parameter. \n\t   Except some special pages that should refresh all links, as test/index.html show.\n\t   However, if your only want several links refesh, you can use data-ajax=\"false\" or data-rel=\"external\"\n\t *\n\t * @type boolean\n\t**/\n\tMobilebone.captureLink = true;\n\t\n\t/**\n\t * Whether catch events of 'submit' from <form> element\n\t * If the value set to false, <form> is a normal form except data-ajax=\"true\"\n\t * If the value set to true, <form> will submit as a ajax request, \n\t   and the return value will be used to create a new page and transition into meanwhile.\n\t   However, if data-ajax=\"false\", <form> won't submit as a ajax.\n\t *\n\t * @type boolean\n\t**/\n\tMobilebone.captureForm = true;\n\t\n\t/**\n\t * The root of transition-callback\n\t * Default value is 'root', you can consider as window-object. \n\t   However, there are may many callbacks, it's impossible that all functions are global function.\n\t   We may custom a global object to store our callbacks, such as:\n\t   Callback = {\n\t\t fun1: function() {}, \n\t\t fun2: function() {}, \n\t\t fun3: function() {},  \n\t   }\n\t   In this case, the value of 'obilebone.rootTransition' should set Callback;\n\t *\n\t * @type object\n\t**/\n\tMobilebone.rootTransition = root;\n\t\n\t/**\n\t * Whether merge(vs cover) global callback and local callback\n\t *\n\t * @type boolean\n\t**/\n\tMobilebone.mergeCallback = true;\n\n\t/**\n\t *  className of animation\n\t *\n\t * @type string\n\t**/\n\tMobilebone.classAnimation = \"slide\";\n\t/**\n\t *  for mark page element\n\t *\n\t * @type string\n\t**/\n\tMobilebone.classPage = \"page\";\n\t/**\n\t * className for mark mask element\n\t *\n\t * @type string\n\t**/\n\tMobilebone.classMask = \"mask\";\n\t/**\n\t * Whether url changes when history changes\n\t * If this value is false, the url will be no change.\n\t *\n\t * @type boolean\n\t**/\n\tMobilebone.pushStateEnabled = true;\n\t/**\n\t * Whether excute JavaScript when ajax HTML loaded\n\t * If this value is true, the script will excute.\n\t *\n\t * @type boolean\n\t**/\n\tMobilebone.evalScript = false;\n\t\n\t\n\tif (// When running inside a FF iframe, calling replaceState causes an error. So set 'pushStateEnabled = false' \n\t\t(window.navigator.userAgent.indexOf( \"Firefox\" ) >= 0 && window.top !== window)\n\t) {\n\t\tMobilebone.pushStateEnabled = false;\n\t}\n\t\n\t/**\n\t * if browser do not support history/classList, stop here\n\t**/\n\tif (supportHistory == false) return Mobilebone;\n\t\n\t/**\n\t * don't excute window.onpopstate when page load\n\t**/\n\thistory.popstate = false;\n\t\n\t/**\n\t * Function for transition\n\t * In most cases, you are unnecessary to use this function , unlike Mobilebone.createPage\n\t \n\t * @params  pageInto: dom-object. Element which will transform into. - Necessary\n\t            pageOut:  dom-object. Element which will transform out.   - Optional\n\t\t\t    back:     boolean.    Direction of transition.          - Optional\n\t\t\t    options:  object.     Cover or add parameters.           - Optional\n\t * @returns undefined\n\t * @example Mobilebone.transition(element);\n\t            Mobilebone.transition(element1, element2);\n\t\t        Mobilebone.transition(element1, element2, true);\n\t\t        Mobilebone.transition(element1, element2, { id: \"only\" });\n\t\t        Mobilebone.transition(element1, element2, true, { id: \"only\" });\n\t**/\n\tMobilebone.transition = function(pageInto, pageOut, back, options) {\n\t\tif (arguments.length == 0 || pageInto == pageOut) return;\n\t\tif (arguments.length == 3 && isNaN(back * 1) == true) {\n\t\t\toptions = back;\n\t\t\tback = options.back;\n\t\t};\n\n\t\t//if those parameters is missing\n\t\tpageOut = pageOut || null, back = back || false, options = options || {};\n\t\t\n\t\t// defaults parameters\n\t\tvar defaults = {\n\t\t\t// the value of callback is a key name, and the host is root here. \n\t\t\t// eg. if the name of animationstart is 'doLoading', so the script will execute 'root.doLoading()'\n\t\t\t// By default, the value of root is 'window'\n\t\t\troot: this.rootTransition,\n\t\t\t// the form of transition, the value (eg. 'slide') will be a className to add or remove. \n\t\t\t// of course, u can set to other valeu, for example, 'fade' or 'flip'. However, u shou add corresponding CSS3 code.\n\t\t\tform: this.form || this.classAnimation,\n\t\t\t// 'animationstart/animationend/...' are callbacks params\n\t\t\t// Note: those all global callbacks!\n\t\t\tonpagefirstinto: this.onpagefirstinto,\n\t\t\tanimationstart: this.animationstart,\n\t\t\tanimationend: this.animationend,\n\t\t\tpreventdefault: this.preventdefault,\n\t\t\tfallback: this.fallback,\n\t\t\tcallback: this.callback\n\t\t}, params = function(element) {\n\t\t\tif (!element || !element.getAttribute) return {};\n\t\t\t\n\t\t\tvar _params = {}, _dataparams = _queryToObject(element.getAttribute(\"data-params\") || '');\n\t\t\t\n\t\t\t// rules as follow:\n\t\t\t// data-* > data-params > options > defaults\t\n\t\t\t[\"title\", \"root\", \"form\"].forEach(function(key) {\t\n\t\t\t\t_params[key] = element.getAttribute(\"data-\" + key) || _dataparams[key] || options[key] || defaults[key];\n\t\t\t});\n\t\t\t\n\t\t\tif (typeof _params.root == \"string\") {\n\t\t\t\t_params.root = Mobilebone.getFunction(_params.root);\n\t\t\t}\n\t\t\t\n\t\t\t[\"onpagefirstinto\", \"callback\", \"fallback\", \"animationstart\", \"animationend\", \"preventdefault\"].forEach(function(key) {\n\t\t\t\tif (Mobilebone.mergeCallback == true && typeof defaults[key] == \"function\") {\n\t\t\t\t\t// merge global callback\n\t\t\t\t\tvar local_function_key = element.getAttribute(\"data-\" + key) || _dataparams[key];\n\t\t\t\t\tif (typeof _params.root[local_function_key] == \"function\") {\t\t\n\t\t\t\t\t\t_params[key] = function() {\n\t\t\t\t\t\t\tdefaults[key].apply(this, arguments);\n\t\t\t\t\t\t\t_params.root[local_function_key].apply(this, arguments);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (typeof options[key] == \"function\") {\n\t\t\t\t\t\t_params[key] = function() {\n\t\t\t\t\t\t\tdefaults[key].apply(this, arguments);\n\t\t\t\t\t\t\toptions[key].apply(this, arguments);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_params[key] = defaults[key];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// replace global callback\n\t\t\t\t\t_params[key] = element.getAttribute(\"data-\" + key) || _dataparams[key] || options[key] || defaults[key];\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\treturn _params;\n\t\t};\n\t\t\n\t\t// get params of each \n\t\tvar params_out = params(pageOut), params_in = params(pageInto);\n\t\t\n\t\tif (pageOut != null && pageOut.classList) {\n\t\t\t// weather prevent transition\n\t\t\tvar preventOut = params_out.preventdefault, isPreventOut = false;\n\t\t\tif (typeof preventOut == \"string\") preventOut = params_out.root[preventOut];\n\t\t}\n\t\tif (pageInto != null && pageInto.classList) {\n\t\t\t// weather prevent transition\n\t\t\tvar preventInto = params_in.preventdefault, isPreventInto = false;\n\t\t\tif (typeof preventInto == \"string\") preventInto = params_in.root[preventInto];\n\t\t\t\n\t\t}\n\t\tif (typeof preventOut == \"function\") isPreventOut = preventOut.call(params_out.root, pageInto, pageOut, options);\n\t\t\n\t\t// if functions of 'preventdefault' are same for pageIn and pageout, just excute once.\n\t\tif (isPreventOut == true && preventOut === preventInto) return false;\n\t\t\n\t\tif (typeof preventInto == \"function\") isPreventInto = preventInto.call(params_in.root, pageInto, pageOut, options);\n\t\t// if pageinto stopped, stop all\n\t\tif (isPreventInto == true) {\n\t\t\t// only run here and nothing more\n\t\t\treturn false;\t\n\t\t}\n\t\t\n\t\t// set animation callback as a method\n\t\tvar fun_animationCall = function(page, data) {\n\t\t\tif (page.flagAniBind == true) return;\n\t\t\t// do callback when animation start/end\n\t\t\t[\"animationstart\", \"animationend\"].forEach(function(animationkey, index) {\n\t\t\t\tvar animition = params_in[animationkey], webkitkey = \"webkit\" + animationkey.replace(/^a|s|e/g, function(matchs) {\n\t\t\t\t\treturn matchs.toUpperCase();\n\t\t\t\t});\n\t\t\t\tvar animateEventName = isWebkit? webkitkey: animationkey;\n\t\t\t\t// if it's the out element, hide it when 'animationend'\n\t\t\t\tindex && page.addEventListener(animateEventName, function() {\n\t\t\t\t\tif (this.classList.contains(\"in\") == false) {\n\t\t\t\t\t\tthis.style.display = \"none\";\n\t\t\t\t\t\t// add on v2.5.5\n\t\t\t\t\t\t// move here on v2.5.8\n\t\t\t\t\t\tif (this.removeSelf == true) {\n\t\t\t\t\t\t\tthis.parentElement.removeChild(this);\t\n\t\t\t\t\t\t\tthis.removeSelf = null;\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.classList.remove(params(this).form);\n\t\t\t\t});\n\t\t\t\t// bind animation events\n\t\t\t\tif (typeof animition == \"string\" && params_in.root[animition]) {\n\t\t\t\t\tpage.addEventListener(animateEventName, function() {\n\t\t\t\t\t\tdata.root[animition].call(data.root, this, this.classList.contains(\"in\")? \"into\": \"out\", options);\n\t\t\t\t\t});\n\t\t\t\t} else if (typeof animition == \"function\") {\n\t\t\t\t\tpage.addEventListener(animateEventName, function() {\n\t\t\t\t\t\tanimition.call(data.root, this, this.classList.contains(\"in\")? \"into\": \"out\", options);\t\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t// set a flag\n\t\t\t\tpage.flagAniBind = true;\n\t\t\t});\n\t\t};\n\t\t\n\t\tif (pageOut != null && pageOut.classList) {\n\t\t\t// do transition if there are no 'prevent'\n\t\t\tif (isPreventOut != true) {\n\t\t\t\tpageOut.classList.add(params_out.form);\n\t\t\t\t// reflow\n\t\t\t\tpageOut.offsetWidth = pageOut.offsetWidth;\n\t\t\t\t// go, go, go\n\t\t\t\tpageOut.style.display = \"block\";\n\t\t\t\tpageOut.classList.add(\"out\");\n\t\t\t\tpageOut.classList.remove(\"in\");\n\t\t\t\t// if reverse direction\n\t\t\t\tpageOut.classList[back? \"add\": \"remove\"](\"reverse\");\n\t\t\t\t\n\t\t\t\t// add on v2.5.5\n\t\t\t\tpageOut.removeSelf = pageOut.removeSelf || null;\n\t\t\t\t\n\t\t\t\t// set animation callback for 'pageInto'\n\t\t\t\t// for issues #153\n\t\t\t\tfun_animationCall(pageOut, params_out);\n\t\t\t\t\n\t\t\t\t// do fallback every time\n\t\t\t\tvar fallback = params_out.fallback;\n\t\t\t\tif (typeof fallback == \"string\") fallback = params_out.root[fallback];\n\t\t\t\tif (typeof fallback == \"function\") fallback.call(params_out.root, pageInto, pageOut, options);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (pageInto != null && pageInto.classList) {\t\t\t\t\n\t\t\t// for title change\n\t\t\tvar title = params_in.title, \n\t\t\t    header = document.querySelector(\"h1\"), \n\t\t\t    first_page = document.querySelector(\".\" + this.classPage);\t\n\t\t\t\t\n\t\t\t// do title change\t\n\t\t\tif (title && options.title !== false) {\n\t\t\t\tdocument.title = title;\n\t\t\t\tif (header) {\n\t\t\t\t\theader.innerHTML = title;\n\t\t\t\t\theader.title = title;\n\t\t\t\t}\n\t\t\t} else if (first_page == pageInto && !pageOut && document.title) {\n\t\t\t\t// set data-title for first visibie page\n\t\t\t\tpageInto.setAttribute(\"data-title\", document.title);\n\t\t\t}\n\t\t\t\t\t\t\n\t\t\t// delete page with same id when options.remove !== false\n\t\t\tvar pageid = options.id || pageInto.id, hashid = options.id || pageInto.id;\n\t\t\t\n\t\t\tif (options.id) {\n\t\t\t\tpageid = pageid.split(\"?\")[0];\n\t\t\t}\n\t\t\tvar relid = store[\"_\" + pageid];\n\t\t\t\n\t\t\tif (options.remove !== false && store[pageid] && store[pageid] != pageInto) {\n\t\t\t\t// hashid may store the same page, we should delete also\n\t\t\t\t// when data-reload not 'false' or null\n\t\t\t\t// v2.4.4+\n\t\t\t\tif (relid && store[relid] && options.reload == true) {\n\t\t\t\t\tdelete store[relid];\n\t\t\t\t\tdelete store[\"_\" + pageid];\n\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\tif (options.reload == true) {\n\t\t\t\t\t// v2.5.8 for issues #147\n\t\t\t\t\tpageInto.removeSelf = true;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (store[pageid] != pageOut) {\n\t\t\t\t\tstore[pageid].parentElement && store[pageid].parentElement.removeChild(store[pageid]);\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\tpageOut.removeSelf = true;\n\t\t\t\t}\n\t\t\t\tdelete store[pageid];\n\t\t\t}\t\n\t\t\t\n\t\t\t\n\t\t\t// do transition\n\t\t\tif (pageOut) pageInto.classList.add(params_in.form);\n\t\t\t// iOS bug \n\t\t\t// reflow for fixing issues #80, #86\n\t\t\tpageInto.offsetWidth = pageInto.offsetWidth;\n\t\t\t// go~ as normal\n\t\t\tpageInto.style.display = \"block\";\n\t\t\tpageInto.classList.remove(\"out\");\n\t\t\tpageInto.classList.add(\"in\");\n\t\t\t// if reverse direction\n\t\t\tpageInto.classList[back? \"add\": \"remove\"](\"reverse\");\n\n\t\t\t// do callback when come in first time\n\t\t\tvar onpagefirstinto = params_in.onpagefirstinto;\n\t\t\t// first judge change to pageInto store\n\t\t\t// v2.5.5 add for fix issues #138\n\t\t\tif (!pageInto.firstintoBind) {\n\t\t\t\tif (typeof onpagefirstinto == \"string\" && params_in.root[onpagefirstinto]) {\n\t\t\t\t\tparams_in.root[onpagefirstinto].call(params_in.root, pageInto, pageOut, options);\n\t\t\t\t} else if (typeof onpagefirstinto == \"function\") {\n\t\t\t\t\tonpagefirstinto.call(params_in.root, pageInto, pageOut, options);\n\t\t\t\t}\n\t\t\t\t// capture form submit\n\t\t\t\tslice.call(pageInto.querySelectorAll(\"form\")).forEach(function(form) {\n\t\t\t\t\tMobilebone.submit(form);\n\t\t\t\t});\t\n\t\t\t\t\n\t\t\t\tpageInto.firstintoBind = true;\n\t\t\t}\n\t\t\t\n\t\t\t// set animation callback for 'pageInto'\n\t\t\tfun_animationCall(pageInto, params_in);\n\t\t\t\n\t\t\t// history\n\t\t\t// hashid should a full url address\n\t\t\t// different with pageid\n\t\t\t// add on 2.4.2\n\t\t\tvar url_push = hashid, url_push_replaced = '';\n\t\t\tif (url_push && /^#/.test(url_push) == false) {\n\t\t\t\turl_push = \"#\" + url_push;\n\t\t\t}\n\t\t\turl_push_replaced = url_push.replace(/^#/, \"#&\");\n\t\t\t\n\t\t\tif (supportHistory && this.pushStateEnabled && options.history !== false && url_push \n\t\t\t\t// hash should be different\n\t\t\t\t// can fix issues #79, #87 maybe\n\t\t\t\t&& url_push_replaced != location.hash\n\t\t\t) {\n\t\t\t\t// don't trigger 'popstate' events\n\t\t\t\thistory.popstate = false;\n\t\t\t\t// if only pageIn, use 'replaceState'\n\t\t\t\thistory[pageOut? \"pushState\": \"replaceState\"](null, document.title, url_push.replace(/^#/, \"#&\"));\n\t\t\t}\n\t\t\t\n\t\t\t// store page-id, just once\n\t\t\tif (!store[pageid]) {\n\t\t\t\tstore[pageid] = pageInto;\n\t\t\t\t// when we back/prev, we need to get true \n\t\t\t\tif (hashid !== pageid) {\n\t\t\t\t\tstore[hashid] = pageInto;\n\t\t\t\t\tstore[\"_\" + pageid] = hashid;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// do callback every time\n\t\t\tvar callback = params_in.callback;\n\t\t\t\n\t\t\tif (typeof callback == \"string\") callback = params_in.root[callback];\n\t\t\tif (typeof callback == \"function\") callback.call(params_in.root, pageInto, pageOut, options);\n\t\t\t\n\t\t\t// Safari do 'popstate' after 'pushState/replaceState'\n\t\t\t// So, we neet setTimeout to avoid excuting 'Mobilebone.transition()' twice\n\t\t\tsetTimeout(function() {\n\t\t\t\t// reset to popable state\n\t\t\t\thistory.popstate = true;\t\n\t\t\t}, 17);\n\t\t}\n\t};\n\t\n\t\n\t/**\n\t * For getting whole ajax url\n\t * In most cases, you are unnecessary to use this function\n\t \n\t * @params  trigger: dom-object. element with tag-\"a\".  - Optional(at least one)\n\t            url:     string. ajax url.                  - Optional(at least one)\n\t\t\t    params:  string|object. ajax params.        - Optional\n\t * @returns string\n\t * @example Mobilebone.getCleanUrl(elementOfA);\n\t            Mobilebone.getCleanUrl(elementOfForm);\n\t            Mobilebone.getCleanUrl(elementOfA, '', \"a=1&b=2\");\n\t\t        Mobilebone.getCleanUrl(null, \"xxx.html\");\n\t\t        Mobilebone.getCleanUrl(null, \"xxx.html?a=1&b=2\");\n\t\t        Mobilebone.getCleanUrl(null, \"xxx.html\", \"a=1&b=2\");\n\t**/\n\tMobilebone.getCleanUrl = function(trigger, url, params) {\n\t\tvar href = \"\", formdata = \"\", clean_url = \"\";\n\t\tif (trigger) {\n\t\t\t if (trigger.nodeType == 1) {\n\t\t\t\t // form element\n\t\t\t\t if (trigger.action) {\n\t\t\t\t\t href = trigger.getAttribute(\"action\");\n\t\t\t\t\t // add on v2.4.1\n\t\t\t\t\t if (trigger.method && trigger.method.toUpperCase() == \"POST\") {\n\t\t\t\t\t\t return href;\n\t\t\t\t\t } else if (window.$ && $.fn && $.fn.serialize) {\n\t\t\t\t\t\t// use jquery serialize()\n\t\t\t\t\t\tformdata = $(trigger).serialize();\n\t\t\t\t\t } else {\n\t\t\t\t\t\tformdata = {};\n\t\t\t\t\t\t// simple serialize from Mobilebone\n\t\t\t\t\t\tslice.call(trigger.querySelectorAll(\"input,select,textarea\")).forEach(function(control) {\n\t\t\t\t\t\t\tif (control.name && !control.disabled) {\n\t\t\t\t\t\t\t\tvar val = control.value.trim(), name = control.name;\n\t\t\t\t\t\t\t\tif (/^radio|checkbox/i.test(control.type)) {\n\t\t\t\t\t\t\t\t\tif (control.checked) {\n\t\t\t\t\t\t\t\t\t\tif (formdata[name]) {\n\t\t\t\t\t\t\t\t\t\t\tformdata[name].push(val);\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tformdata[name] = [val];\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tformdata[name] = [val];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t }\n\t\t\t\t } else {\n\t\t\t\t\t// a element\n\t\t\t\t\thref = trigger.getAttribute(\"href\");\n\t\t\t\t\tformdata = trigger.getAttribute(\"data-formdata\") || trigger.getAttribute(\"data-data\");\n\t\t\t\t }\n\t\t\t } else if (trigger.url) {\n\t\t\t\t href = trigger.url;\n\t\t\t\t formdata = trigger.data;\n\t\t\t }\n\t\t}\n\n\t\tif (!(href = href || url)) return '';\n\t\t\n\t\t// get formdata\n\t\tformdata = formdata || params || \"\";\n\n\t\tif (typeof formdata == \"object\") {\n\t\t\tvar arr_data = [];\n\t\t\tfor (key in formdata) {\n\t\t\t\tif (!formdata[key].forEach) {\n\t\t\t\t\tformdata[key] = [formdata[key]];\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\tformdata[key].forEach(function(keyValue) {\n\t\t\t\t\tarr_data.push(key + \"=\" + encodeURIComponent(keyValue));\t\t\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}\n\t\t\tif (arr_data.length > 0) {\n\t\t\t\tformdata = arr_data.join(\"&\");\n\t\t\t} else {\n\t\t\t\tformdata = \"\";\n\t\t\t}\n\t\t}\n\t\t\n\t\t// get url of root\n\t\tclean_url = href.split(\"#\")[0].replace(/&+$/, \"\");\n\n\t\tif (clean_url.slice(-1) == \"?\") {\n\t\t\tclean_url = clean_url.split(\"?\")[0];\t\n\t\t}\n\t\t// url = root_url + joiner + formdata\n\t\tif (formdata != \"\") {\t\t\t\t\t\t\n\t\t\tif (/\\?/.test(clean_url)) {\n\t\t\t\tformdata = formdata.replace(/^&|\\?/, \"\");\n\t\t\t\tclean_url = clean_url + \"&\" + formdata;\n\t\t\t} else if (formdata != \"\") {\n\t\t\t\tformdata = formdata.replace(\"?\", \"\");\n\t\t\t\tclean_url = clean_url + \"?\" + formdata;\n\t\t\t}\n\t\t}\n\t\treturn clean_url;\n\t};\n\t\n\t/**\n\t * Create page according to given Dom-element or HTML string. And, notice!!!!! will do transition auto.\n\t \n\t * @params  domHtml:        dom-object|string. Create this to dom element as a role of into-page.               - Necessary\n\t            eleOrObj: dom-object|object. '.page element', or 'a element', or 'options' for get out-page   - Optional\n\t\t\t\toptions:            object.            basically, options = ajax options, of course, u can custom it!   - Optional\n\t * @returns undefined\n\t * @example Mobilebone.createPage(pageDom);\n\t            Mobilebone.createPage(generalDom);\n\t\t        Mobilebone.createPage('<div class=\"page out\">xxx</div>');\n\t\t        Mobilebone.createPage('<p>xxx</p>');\n\t\t        Mobilebone.createPage(pageDom, triggerLink);\n\t\t        Mobilebone.createPage(pageDom, { response: '<div...>' });\n\t\t        Mobilebone.createPage(pageDom, triggerLink, { response: '<div...>' });\n\t *\n\t**/\n\tMobilebone.createPage = function(domHtml, eleOrObj, options) {\n\t\tvar response = null, container = null, classPage = this.classPage, isreload = null;\n\t\t// 'eleOrObj' can '.page element', or 'a element', or 'options'\n\t\t// basically, options = ajax options, of course, u can custom it!\t\t\n\t\tif (!domHtml) return;\n\t\tif (typeof options == \"undefined\" && typeof eleOrObj == \"object\") {\n\t\t\toptions = eleOrObj;\n\t\t}\n\t\toptions = options || {};\n\t\t\n\t\t// 'options' that 'Mobilebone.transition()' needs\n\t\tvar optionsTransition = {};\n\t\t\n\t\t// get page-title from eleOrObj or options\n\t\tvar page_title, id_container, classPageInside;\n\t\t\n\t\tif (eleOrObj) {\n\t\t\tif (eleOrObj.nodeType == 1) {\n\t\t\t\t// legal elements\n\t\t\t\tif (eleOrObj.href || eleOrObj.action) {\n\t\t\t\t\tpage_title = eleOrObj.getAttribute(\"data-title\") || options.title;\n\t\t\t\t}\n\t\t\t\tresponse = options.response;\n\t\t\t\tid_container = eleOrObj.getAttribute(\"data-container\");\n\t\t\t\tcontainer = document.getElementById(id_container);\n\t\t\t\tclassPageInside = eleOrObj.getAttribute(\"data-classpage\");\n\t\t\t\t// pass element as target params, add on v2.3.0\n\t\t\t\toptionsTransition.target = eleOrObj;\n\t\t\t\t// v2.4.4 is_root → isreload\n\t\t\t\tisreload = eleOrObj.getAttribute(\"data-reload\");\n\t\t\t\tif (eleOrObj.tagName.toLowerCase() == \"form\" || (isreload !== null && isreload != \"false\")) {\n\t\t\t\t\toptionsTransition.reload = true;\n\t\t\t\t}\n\t\t\t\t// v2.5.2\n\t\t\t\t// is back? for issues #128\n\t\t\t\toptionsTransition.back = eleOrObj.getAttribute(\"data-rel\") == \"back\";\t\n\t\t\t\t\n\t\t\t\t// v2.6.0 history\n\t\t\t\tif (eleOrObj.getAttribute(\"data-history\") == \"false\") {\n\t\t\t\t\toptionsTransition.history = false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tresponse = eleOrObj.response || options.response;\t\n\t\t\t\tpage_title = eleOrObj.title || options.title;\n\t\t\t\tcontainer = eleOrObj.container || options.container;\n\t\t\t\tclassPageInside = eleOrObj.classPage || options.classPage;\n\t\t\t\toptionsTransition.target = eleOrObj.target;\n\t\t\t\t// v2.5.2\n\t\t\t\t// is back? for issues #128\n\t\t\t\toptionsTransition.back = eleOrObj.back || options.back;\t\t\n\t\t\t}\n\t\t\tif (container && classPageInside) classPage = classPageInside;\t\n\t\t}\n\t\t\n\t\t// get current page(will be out) according to 'page_or_child'\n\t\tvar current_page = (classPage == classPageInside? container : document).querySelector(\".in.\" + classPage);\n\n\t\t// get create page (will be into) according to 'domHtml'\n\t\tvar create_page = null;\n\t\t\n\t\tvar create = document.createElement(\"div\");\n\t\tif (typeof domHtml == \"string\") {\n\t\t\tcreate.innerHTML = domHtml;\n\t\t} else {\n\t\t\tcreate.appendChild(domHtml);\n\t\t}\n\t\t\n\t\t// excute inline JavaScript\n\t\tif (Mobilebone.evalScript == true && domHtml.firstintoBind != true) {\n\t\t\tslice.call(create.getElementsByTagName(\"script\")).forEach(function(originScript) {\n\t\t\t\tvar scriptContent = originScript.innerHTML.trim(), type = originScript.getAttribute(\"type\");\n\t\t\t\tif (scriptContent.trim() == \"\" || originScript.src) return;\n\t\t\t\tvar head = document.getElementsByTagName(\"head\")[0] || document.documentElement,\n\t\t\t\tscript = document.createElement(\"script\");\n\t\t\t\tif (type) script.type = type;\n\t\t\t\tscript.appendChild(document.createTextNode(scriptContent));\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\thead.insertBefore(script, head.firstChild);\n\t\t\t\t\thead.removeChild(script);\n\t\t\t\t\tscript = null;\n\t\t\t\t}, 17);\n\t\t\t\toriginScript = null;\n\t\t\t});\n\t\t}\n\t\t\n\t\tvar create_title = create.getElementsByTagName(\"title\")[0];\n\t\t\n\t\t// get the page element\n\t\tif (!(create_page = create.querySelector(\".\" + classPage))) {\n\t\t\t// if there no .page, create as create_page\n\t\t\tcreate.className = classPage + \" out\";\n\t\t\tcreate_page = create;\n\t\t}\n\t\t// set and store title\n\t\tif (typeof page_title == \"string\") {\n\t\t\tcreate_page.setAttribute(\"data-title\", page_title);\n\t\t} else if (create_title && create_title.innerText) { // the judge behind '&&' for issues #144 \n\t\t\tcreate_page.setAttribute(\"data-title\", create_title.innerText);\n\t\t}\n\t\t\n\t\t// insert create page as a last-child\n\t\t(container || document.body).appendChild(create_page);\n\t\t\n\t\t// release memory\n\t\tcreate = null;\n\t\t\n\t\t// do transition\n\t\toptionsTransition.response = response || domHtml;\n\t\toptionsTransition.id = this.getCleanUrl(eleOrObj) || create_page.id || (\"unique\" + Date.now());\n\t\t\n\t\t// 'if' statement below added on v2.0.0\n\t\tif (typeof options == \"object\") { \n\t\t\tif (typeof options.history != \"undefined\") {\n\t\t\t\toptionsTransition.history = options.history;\n\t\t\t}\n\t\t\tif (typeof options.remove != \"undefined\") {\n\t\t\t\toptionsTransition.remove = options.remove;\n\t\t\t}\n\t\t\tif (typeof options.target != \"undefined\") {\n\t\t\t\toptionsTransition.target = options.target;\n\t\t\t}\n\t\t\tif (typeof options.title != \"undefined\") {\n\t\t\t\toptionsTransition.title = options.title;\n\t\t\t}\n\t\t}\n\t\tif (classPage == classPageInside) {\n\t\t\toptionsTransition.history = false;\n\t\t\toptionsTransition.classPage = classPage;\n\t\t}\n\t\t\n\t\t// do transition\n\t\tthis.transition(create_page, current_page, optionsTransition);\n\t};\n\t\n\t/**\n\t * For ajax callback. \n\t * For example, data-success=\"a.b.c\". We can't use 'a.b.c' as a function, because it's a string. We should do some work to get it!\n\t \n\t * @params  keys:        string. - Necessary\n\t * @returns function\n\t            undefined keys is not string\n\t\t\t\twindow    keys undefined\n\t * @example Mobilebone.getFunction(\"a.b.c\");\n\t *\n\t**/\n\tMobilebone.getFunction = function(keys) {\n\t\tif (typeof keys != \"string\") return;\n\t\t// eg. 'globalObject.functionName'\n\t\tvar fun = root, arr_key = keys.split(\".\");\n\t\tfor (var index=0; index<arr_key.length; index+=1) {\n\t\t\tif (!(fun = fun[arr_key[index]])) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn fun;\n\t};\n\t\t\n\t/**\n\t * For ajax request to get HTML or JSON. \n\t \n\t * @params  aOrFormOrObj        - Necessary  \n\t            1. dom-object:<a>|<form>.\n\t\t\t\t2. object.  \n\t * @returns undefined\n\t * @example Mobilebone.ajax(document.querySelector(\"a\"));\n\t            Mobilebone.ajax({\n\t\t\t\t  url: 'xxx.html',\n\t\t\t\t  success: function() {}\n\t\t    \t});\n\t *\n\t**/\n\tMobilebone.ajax = function(aOrFormOrObj) {\n\t\tif (!aOrFormOrObj) return;\n\t\t\n\t\t// default params\n\t\tvar defaults = {\n\t\t\turl: \"\",\n\t\t\ttype: \"\",\n\t\t\tdataType: \"\",\n\t\t\tdata: {},\n\t\t\ttimeout: 10000,\n\t\t\tasync: true,\n\t\t\tusername: \"\",\n\t\t\tpassword: \"\",\n\t\t\tsuccess: function() {},\n\t\t\terror: function() {},\n\t\t\tcomplete: function() {}\t\n\t\t};\n\t\t\n\t\tvar params = {}, ele_mask = null, formData = null;\n\t\t\n\t\t// if 'aOrFormOrObj' is a element, we should turn it to options-object\n\t\tvar params_from_trigger = {}, attr_mask;\n\t\tif (aOrFormOrObj.nodeType == 1) {\n\t\t\tparams_from_trigger = _queryToObject(aOrFormOrObj.getAttribute(\"data-params\") || \"\");\n\t\t\t// get params\n\t\t\tfor (key in defaults) {\n\t\t\t\t// data-* > data-params > defaults\n\t\t\t\tparams[key] = aOrFormOrObj.getAttribute(\"data-\" + key) || params_from_trigger[key] || defaults[key];\n\t\t\t\tif (typeof defaults[key] == \"function\" && typeof params[key] == \"string\") {\n\t\t\t\t\t// eg. globalObject.functionName\n\t\t\t\t\tparams[key] = this.getFunction(params[key]);\n\t\t\t\t\tif (typeof params[key] != \"function\") {\n\t\t\t\t\t\tparams[key] = defaults[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// address of ajax url\n\t\t\tparams.url = this.getCleanUrl(aOrFormOrObj, params.url);\t\n\t\t\tparams.target = aOrFormOrObj;\n\t\t\t// v2.5.2\n\t\t\t// is back? for issues #128\n\t\t\tparams.back = aOrFormOrObj.getAttribute(\"data-rel\") == \"back\";\t\n\t\t\t\n\t\t\tvar tagName = aOrFormOrObj.tagName.toLowerCase();\n\t\t\tif (tagName == \"form\") {\n\t\t\t\tparams.type = aOrFormOrObj.method;\n\t\t\t\t\n\t\t\t\tformData = new FormData(aOrFormOrObj);\n\t\t\t} else if (tagName == \"a\") {\n\t\t\t\t// v2.5.8 for issues #157\n\t\t\t\tvar idContainer = aOrFormOrObj.getAttribute(\"data-container\"),\n\t\t\t\t\tclassPageInside = aOrFormOrObj.getAttribute(\"data-classpage\"),\n\t\t\t\t\tcontainer = idContainer && document.getElementById(idContainer);\n\t\t\t\tif (container && classPageInside && classPageInside != Mobilebone.classPage) {\n\t\t\t\t\t// inner ajax no history change\n\t\t\t\t\tparams.history = false;\n\t\t\t\t\t// title do not change\n\t\t\t\t\tparams.title = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// get mask element\n\t\t\tattr_mask = aOrFormOrObj.getAttribute(\"data-mask\");\n\t\t\tif (attr_mask == \"true\" || attr_mask == \"\") {\n\t\t\t\tele_mask = aOrFormOrObj.querySelector(\".\" + this.classMask);\n\t\t\t}\n\t\t}\n\t\t// if 'aOrFormOrObj' is a object\n\t\telse if (aOrFormOrObj.url) {\n\t\t\t// get params\n\t\t\tfor (key2 in defaults) {\n\t\t\t\tparams[key2] = aOrFormOrObj[key2] || defaults[key2];\n\t\t\t}\n\t\t\t// get url\n\t\t\tparams.url = this.getCleanUrl(null, params.url, params.data);\n\t\t\t// here params.title will become page title;\n\t\t\tparams.title = aOrFormOrObj.title;\n\t\t\t// v2.5.2\n\t\t\t// is back? for issues #128\n\t\t\t// when history.back()\n\t\t\tparams.back = aOrFormOrObj.back;\n\t\t} else {\n\t\t\treturn;\t\n\t\t}\n\t\t\n\t\t// do ajax\n\t\t// get mask and loading element\n\t\tvar body = container || document.body;\n\t\tif (typeof attr_mask != \"string\") {\n\t\t\tele_mask = body.querySelector(\".\" + this.classMask);\n\t\t}\n\t\tif (ele_mask == null) {\n\t\t\tele_mask = document.createElement(\"div\");\n\t\t\tele_mask.className = this.classMask;\n\t\t\tele_mask.innerHTML = '<i class=\"loading\"></i>';\n\t\t\tif (typeof attr_mask == \"string\") {\n\t\t\t\taOrFormOrObj.appendChild(ele_mask);\n\t\t\t} else {\n\t\t\t\tbody.appendChild(ele_mask);\n\t\t\t}\n\t\t}\n\t\t// show loading\n\t\tele_mask.style.display = \"block\";\n\t\t\n\t\t// ajax request\n\t\tvar xhr = new XMLHttpRequest();\t\t\t\n\t\txhr.open(params.type || \"GET\", params.url + (/\\?/.test(params.url)? \"&\" : \"?\") + \"r=\" + Date.now(), params.async, params.username, params.password);\n\t\txhr.timeout = params.timeout;\n\t\t\n\t\txhr.onload = function() {\n\t\t\t// so far, many browser hasn't supported responseType = 'json', so, use JSON.parse instead\n\t\t\tvar response = null;\n\t\t\t\n\t\t\tif (xhr.status == 200) {\n\t\t\t\tif (params.dataType == \"json\" || params.dataType == \"JSON\") {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tresponse = JSON.parse(xhr.response);\n\t\t\t\t\t\tparams.response = response;\n\t\t\t\t\t\tMobilebone.createPage(Mobilebone.jsonHandle(response), aOrFormOrObj, params);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tparams.message = \"JSON parse error：\" + e.message;\n\t\t\t\t\t\tparams.error.call(params, xhr, xhr.status);\n\t\t\t\t\t}\n\t\t\t\t} else if (params.dataType == \"unknown\") {\n\t\t\t\t\t// ajax send by url\n\t\t\t\t\t// no history hush\t\t\t\t\t\n\t\t\t\t\tparams.history = false;\n\t\t\t\t\t// I don't remember why add 'params.remove = false' here, \n\t\t\t\t\t// but it seems that this will cause issues #147\n\t\t\t\t\t// no element remove\n\t\t\t\t\t// del → v2.5.8 // params.remove = false;\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// as json\n\t\t\t\t\t\tresponse = JSON.parse(xhr.response);\n\t\t\t\t\t\tparams.response = response;\n\t\t\t\t\t\tMobilebone.createPage(Mobilebone.jsonHandle(response), aOrFormOrObj, params);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t// as html\n\t\t\t\t\t\tresponse = xhr.response;\n\t\t\t\t\t\tMobilebone.createPage(response, aOrFormOrObj, params);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresponse = xhr.response;\n\t\t\t\t\t// 'response' is string\n\t\t\t\t\tMobilebone.createPage(response, aOrFormOrObj, params);\n\t\t\t\t}\n\t\t\t\tparams.success.call(params, response, xhr.status);\n\t\t\t} else {\n\t\t\t\tparams.message = \"The status code exception!\";\n\t\t\t\tparams.error.call(params, xhr, xhr.status);\n\t\t\t}\n\t\t\t\n\t\t\tparams.complete.call(params, xhr, xhr.status);\n\t\t\t\n\t\t\t// hide loading\n\t\t\tele_mask.style.display = \"none\";\n\t\t}\n\t\t\n\t\txhr.onerror = function(e) {\n\t\t\tparams.message = \"Illegal request address or an unexpected network error!\";\n\t\t\tparams.error.call(params, xhr, xhr.status);\n\t\t\t// hide loading\n\t\t\tele_mask.style.display = \"none\";\n\t\t}\n\t\t\n\t\txhr.ontimeout = function() {\n\t\t\tparams.message = \"The request timeout!\";\n\t\t\tparams.error.call(params, xhr, xhr.status);\n\t\t\t// hide loading\n\t\t\tele_mask.style.display = \"none\";\n\t\t};\n\t\t\n\t\t// set request header for server\n\t\txhr.setRequestHeader(\"Type\", \"ajax\");\n\t\txhr.setRequestHeader(\"From\", \"mobilebone\");\n\t\t\n\t\txhr.send(formData);\n\t};\n\t\n\t/**\n\t * capture form submit events to a ajax request.\n\t \n\t * @params  form:        formElement. - Necessary\n\t * @example Mobilebone.form(document.querySelector(\"form\"));\n\t *\n\t**/\n\tMobilebone.submit = function(form) {\n\t\tif (!form || typeof form.action != \"string\") return; \n\t\tvar ajax = form.getAttribute(\"data-ajax\");\n\t\tif (ajax == \"false\" || (Mobilebone.captureForm == false && ajax != \"true\")) return;\n\t\t\n\t\tform.addEventListener(\"submit\", function(event) {\n\t\t\t// prevent detect\n\t\t\tvar attrPrevent = this.getAttribute(\"data-preventdefault\");\n\t\t\t// get 'preventDefault' function\n\t\t\tvar funPrevent = Mobilebone.getFunction(attrPrevent);\n\t\t\tif (typeof funPrevent == \"function\" && funPrevent(this) == true) {\n\t\t\t\t// if the return value of prevent function is true, prevent everything~\n\t\t\t\tevent.preventDefault();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tMobilebone.ajax(this);\n\t\t\tevent.preventDefault();\n\t\t});\n\t};\n\t\n\t\n\t/**\n\t * Sometime we don't know direction of transition. Such as browser history change, or data-rel=\"auto\".\n\t   In this case, we ensure the direction(back or prev) by the sorts of two pages(into or out)\n\t \n\t * @params  page_in  dom-object      - Necessary  \n\t            page_out  dom-object      - Optional \n\t\t\t\t\n\t * @returns boolean\n\t *\n\t**/\n\tMobilebone.isBack = function(page_in, page_out) {\n\t\t// back or forword, according to the order of two pages\n\t\tif (history.tempBack == true) {\n\t\t\t// backwords\n\t\t\thistory.tempBack = null;\n\t\t\treturn true;\n\t\t}\n\t\tif (typeof page_in == \"undefined\") return true;\n\t\tif (!page_out) return false;\n\t\treturn page_in.compareDocumentPosition(page_out) == 4;\n\t};\n\t\n\t/**\n\t * If dataType of ajax is 'json', we can't convert json-data to page-element. \n\t   So, we export a function names 'jsonHandle' to handle json-data.\n\t * Attention, it's a global interface. If your project has many json call, you should use JSON itself to make a distinction.\n\t   For example, every JSON include the only json-id:\n\t   {\n\t\t  \"id\": \"homePage\" ,\n\t\t  \"data\": []  \n\t   }\n\t   different with\n\t   {\n\t\t  \"id\": \"listPage\" ,\n\t\t  \"data\": []  \n\t   }\n\t *\n\t * @params  json    - Necessary \t\t\n\t * @returns dom-object|string\n\t *\n\t**/\n\tMobilebone.jsonHandle = function(json) {\n\t\treturn '<p style=\"text-align:center;\">Dear master, if you see me, show that JSON parsing function is undefined!</p>';\n\t},\n\t\t\n\t/**\n\t * Initialization. Load page according to location.hash. And bind link-catch events.\n\t**/\n\tMobilebone.init = function() {\t\n\t\tif (hasInited == true) return 'Don\\'t repeat initialization!';\n\n\t\tvar hash = location.hash.replace(\"#&\", \"#\"), ele_in = null;\n\t\t\n\t\tif (hash == \"\" || hash == \"#\") {\n\t\t\tthis.transition(document.querySelector(\".\" + this.classPage));\n\t\t} else if (isSimple.test(hash) == true && (ele_in = document.querySelector(hash)) && ele_in.classList.contains(this.classPage)) { // 'ele_in' must be a page element\n\t\t\tthis.transition(ele_in);\t\n\t\t} else {\n\t\t\t// as a ajax\n\t\t\tthis.ajax({\n\t\t\t\turl: hash.replace(\"#\", \"\"),\n\t\t\t\tdataType: \"unknown\",\n\t\t\t\terror: function() {\n\t\t\t\t\tele_in = document.querySelector(\".\" + Mobilebone.classPage);\t\n\t\t\t\t\tMobilebone.transition(ele_in);\n\t\t\t\t}\n\t\t\t});\t\n\t\t}\n\t\t\n\t\t// Initialization link-catch events.\n\t\tvar $ = root.$ || root.jQuery || root.Zepto;\n\t\tif ($ && $.fn && $.fn.tap && ('ontouchstart' in window == true)) {\n\t\t\t// for some unknown 'tap' plugin\n\t\t\t$(document).tap(this.handleTapEvent);\n\t\t\t\n\t\t\t// zepto tap event.preventDefault can't prevent default click-events\n\t\t\tdocument.addEventListener(\"click\", function(event) {\n\t\t\t\tvar target = event.target;\n\t\t\t\tif (!target) return;\n\t\t\t\tif (target.tagName.toLowerCase() != \"a\" && !(target = target.getParentElementByTag(\"a\"))) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar ajax = target.getAttribute(\"data-ajax\"), href = target.href;\n\t\t\t\t// if not ajax request\n\t\t\t\tif (target.getAttribute(\"data-rel\") == \"external\" \n\t\t\t\t\t|| ajax == \"false\"\n\t\t\t\t\t|| (href.replace(\"://\", \"\").split(\"/\")[0] !== location.href.replace(\"://\", \"\").split(\"/\")[0] && ajax != \"true\")\n\t\t\t\t\t|| (Mobilebone.captureLink == false && ajax != \"true\")\n\t\t\t\t) return;\n\t\t\t\tevent.preventDefault();\n\t\t\t});\n\t\t} else {\n\t\t\tdocument.addEventListener(\"click\", this.handleTapEvent);\t\n\t\t}\n\n\t\t// Important: \n\t\t// In ios7+, swipe the edge of page will navigate Safari\n\t\t// that will trigger 'popstate' events and the page will transition twice\n\t\tvar isSafari7 = !!navigator.userAgent.match(/safari/i) && !navigator.userAgent.match(/chrome/i) && typeof document.hidden !== \"undefined\" && !window.chrome;\n\t\tif ('ontouchstart' in window == true && isSafari7) {\n\t\t\tdocument.addEventListener(\"touchmove\", function() {\n\t\t\t\thistory.popstateswipe = true;\t\n\t\t\t});\t\n\t\t\tdocument.addEventListener(\"touchend\", function() {\n\t\t\t\thistory.popstateswipe = false;\t\n\t\t\t});\n\t\t}\n\t\t\n\t\t// change flag-var for avoiding repeat init\n\t\thasInited = true;\n\t};\n\t\n\t/**\n\t * If 'a' element has href, slide auto when tapping~\n\t**/\n\tMobilebone.handleTapEvent = function(event) {\n\t\t/**\n\t\t// iscroll(set tap: true) may cause twice tap problem \n\t\t// which is none of Mobilebone's business\n\t\t// However, you can let code below go to avoid twice tap in Mobilebone\n\t\t// but the tap event bind out of Mobilebone also has bug\n\t\t// so my advice is that: \n\t\t// 1. use Date.now to judge as Mobilebone did; \n\t\t// or\n\t\t// 2. keep this code in the form of comment and fixed bug outside\n\t\tif (store.timerTap && Date.now() - store.timerTap < 100) {\t\n\t\t\tevent.preventDefault();\n\t\t\treturn false;\n\t\t}\n\t\tstore.timerTap = Date.now();\n\t\t*/\n\t\tvar target = null;\n\t\t// you can pass target as params directly\n\t\tif (event && event.nodeType == 1) { \n\t\t\ttarget = event;\n\t\t\ttarget.preventDefault = function() {};\n\t\t}\n\t\t// get target and href\n\t\ttarget = target || event.target || event.touches[0], href = target.href;\n\t\tif ((!href || /a/i.test(target.tagName) == false) && (target = target.getParentElementByTag(\"a\"))) {\n\t\t\thref = target.href;\n\t\t}\n\t\t// the page that current touched or actived\n\t\tvar self_page = document.querySelector(\".in.\" + Mobilebone.classPage);\n\t\t\n\t\tif (self_page == null || !target) return;\n\n\t\t// optional params for Mobilebone.transition\n\t\tvar options = {\n\t\t\ttarget: target\t\n\t\t};\n\t\t\n\t\t// prevent detect\n\t\tvar attrPrevent = target.getAttribute(\"data-preventdefault\") \n\t\t\t|| _queryToObject(target.getAttribute(\"data-params\") || \"\").preventdefault;\n\t\t// get 'preventDefault' function\n\t\tvar funPrevent = Mobilebone.getFunction(attrPrevent);\n\t\tif (typeof funPrevent == \"function\" && funPrevent(target) == true) {\n\t\t\t// if the return value of prevent function is true, prevent everything~\n\t\t\tevent.preventDefault();\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\t// if mask element exist and displaying, prevent double trigger\n\t\tvar ele_mask = target.getElementsByClassName(Mobilebone.classMask)[0];\n\t\tif (ele_mask && ele_mask.style.display != \"none\") {\n\t\t\tevent.preventDefault();\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tvar idContainer = target.getAttribute(\"data-container\"),\n\t\t\tclassPageInside = target.getAttribute(\"data-classpage\"),\n\t\t\tcontainer = idContainer && document.getElementById(idContainer);\n\t\tif (container && classPageInside && classPageInside != Mobilebone.classPage) {\n\t\t\tself_page = container.querySelector(\".in.\" + classPageInside) || container.querySelector(classPageInside);\n\t\t\t// if (self_page == null) return false;\n\t\t\toptions.history = false;\n\t\t\toptions.title = false;\n\t\t\toptions.classPage = classPageInside;\n\t\t}\n\t\t\n\t\t// if captureLink\n\t\tvar capture = (Mobilebone.captureLink == true);\n\t\t// get rel\n\t\tvar rel = target.getAttribute(\"data-rel\");\n\t\t// if back\n\t\tvar back = false;\n\t\tif (rel == \"back\") {\n\t\t\tback = true;\n\t\t}\n\t\t\t\t\n\t\t// if external link\n\t\tvar external = (rel == \"external\");\n\t\t\n\t\t// if the 'href' is not legal, return\n\t\t// include:\n\t\t// 1. undefined\n\t\t// 2. javascript: (except data-rel=\"back\")\n\t\t// 3. cros, or not capture (except data-ajax=\"true\")\n\t\tif (!href) return;\n\t\t\n\t\thref = href.replace(\"#&\", \"#\");\n\t\t\n\t\tif (target.getAttribute(\"href\").replace(/#/g, \"\") === \"\") {\n\t\t\tevent.preventDefault();\n\t\t\treturn;\n\t\t}\n\t\tif (/^javascript/.test(href)) {\n\t\t\tif (back == false) return;\t\n\t\t} else {\n\t\t\texternal = external || (href.replace(\"://\", \"\").split(\"/\")[0] !== location.href.replace(\"://\", \"\").split(\"/\")[0]);\n\t\t\tif ((external == true || capture == false) && target.getAttribute(\"data-ajax\") != \"true\") return;\n\t\t}\n\t\t\n\t\t// judge that if it's a ajax request\n\t\tif (/^#/.test(target.getAttribute(\"href\")) == true) {\n\t\t\t// hash slide\n\t\t\tvar idTargetPage = href.split(\"#\")[1], eleTargetPage = idTargetPage && document.getElementById(idTargetPage);\n\t\t\tif (back == false && rel == \"auto\") {\n\t\t\t\tback = Mobilebone.isBack(eleTargetPage, self_page);\n\t\t\t}\n\t\t\t\n\t\t\tif (eleTargetPage) {\n\t\t\t\tMobilebone.transition(eleTargetPage, self_page, back, options);\n\t\t\t}\n\t\t\tevent.preventDefault();\n\t\t} else if (/^javascript/.test(href)) {\n\t\t\t// back\n\t\t\thistory.tempBack = true;\n\t\t\thistory.back();\n\t\t} else if (target.getAttribute(\"data-ajax\") != \"false\") {\t\t\t\t\n\t\t\t// get a clean ajax url as page id\n\t\t\tvar clean_url = Mobilebone.getCleanUrl(target);\n\t\t\t\n\t\t\t// if has loaded and the value of 'data-reload' is not 'true'\n\t\t\tvar attr_reload = target.getAttribute(\"data-reload\"), id = target.getAttribute(\"href\");\n\t\t\t\n\t\t\tif ((attr_reload == null || attr_reload == \"false\") && store[clean_url]) {\n\t\t\t\tif (back == false && rel == \"auto\") {\n\t\t\t\t\tback = Mobilebone.isBack(store[clean_url], self_page);\n\t\t\t\t}\n\t\t\t\toptions.id = clean_url;\n\t\t\t\t\n\t\t\t\tvar body = container || document.body;\n\t\t\t\t\n\t\t\t\tif (body.contains(store[clean_url]) == false) {\n\t\t\t\t\tbody.appendChild(store[clean_url]);\n\t\t\t\t}\n\t\t\t\tMobilebone.transition(store[clean_url], self_page, back, options);\n\t\t\t} else {\n\t\t\t\tMobilebone.ajax(target);\n\t\t\t}\n\t\t\tevent.preventDefault();\n\t\t}\n\t};\n\t\n\t\n\t/**\n\t * prototype extend method: get parent element by tagName\n\t**/\n\tElement.prototype.getParentElementByTag = function(tag) {\n\t\tif (!tag) return null;\n\t\tvar element = null, parent = this;\n\t\tvar popup = function() {\n\t\t\tparent = parent.parentElement;\n\t\t\tif (!parent) return null;\n\t\t\tvar tagParent = parent.tagName.toLowerCase();\n\t\t\tif (tagParent === tag) {\n\t\t\t\telement = parent;\n\t\t\t} else if (tagParent == \"body\") {\n\t\t\t\telement = null;\n\t\t\t} else {\n\t\t\t\tpopup();\n\t\t\t}\n\t\t};\n\t\tpopup();\n\t\treturn element;\n\t};\n\t\n\t/**\n\t * private method: convert query string to key-value object\n\t**/\n\tvar _queryToObject = function(string) {\n\t\tvar obj = {};\n\t\tif (typeof string == \"string\") {\n\t\t\tstring.split(\"&\").forEach(function(part) {\n\t\t\t\tvar arr_part = part.split(\"=\");\n\t\t\t\tif (arr_part.length > 1) {\n\t\t\t\t\tobj[arr_part[0]] = part.replace(arr_part[0] + \"=\", \"\");\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn obj;\n\t};\n\t\n\t/**\n\t * auto init\n\t**/\n\twindow.addEventListener(\"DOMContentLoaded\", function() {\n\t\tif (hasInited == false) {\n\t\t\tMobilebone.init();\n\t\t}\n\t});\n\t\n\t/**\n\t * page change when history change\n\t**/\n\twindow.addEventListener(\"popstate\", function() {\n\t\tif (history.popstateswipe == true) {\n\t\t\tlocation.reload();\n\t\t\thistory.popstateswipe = false;\n\t\t\treturn;\n\t\t}\n\t\tif (history.popstate == false) {\n\t\t\thistory.popstate = true;\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tvar hash = location.hash.replace(\"#&\", \"\").replace(/^#/, \"\"), page_in = null;\n\t\t\n\t\tif (hash == \"\") {\n\t\t\t// if no hash, get first page as 'page_in'\n\t\t\tpage_in = document.querySelector(\".\" + Mobilebone.classPage);\n\t\t\tif (page_in.id) return;\t\t\t\n\t\t} else {\n\t\t\tpage_in = store[hash];\n\t\t\t\n\t\t\tif (page_in && isSimple.test(hash) == false) {\n\t\t\t\t// ajax store\n\t\t\t\tMobilebone.createPage(page_in, {\n\t\t\t\t\turl: hash,\n\t\t\t\t\tdataType: \"unknown\",\n\t\t\t\t\thistory: false,\n\t\t\t\t\tback: true\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (!page_in) {\n\t\t\tif (isSimple.test(hash) == false) {\n\t\t\t\t// as a url\n\t\t\t\tMobilebone.ajax({\n\t\t\t\t\turl: hash,\n\t\t\t\t\tdataType: \"unknown\",\n\t\t\t\t\tback: Mobilebone.isBack()\n\t\t\t\t});\t\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tpage_in =  document.querySelector(\"#\" + hash)\n\t\t}\n\t\t\n\t\tvar page_out = document.querySelector(\".in.\" + Mobilebone.classPage);\n\t\t\n\t\tif ((page_in && page_in == page_out) || Mobilebone.pushStateEnabled == false) return;\n\n\t\t// hash ↔ id\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tif (page_in) {\n\t\t\tMobilebone.transition(page_in, page_out, Mobilebone.isBack(page_in, page_out), {\n\t\t\t\tid: hash,  // fix issue #83\n\t\t\t\thistory: false,\n\t\t\t\tremove: false\n\t\t\t});\n\t\t}\n\t});\n\t\n\tdocument.MBLOADED = true;\n\t\t\n\treturn Mobilebone;\n});"]}