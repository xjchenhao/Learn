{"version":3,"sources":["realName.js"],"names":[],"mappings":"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","file":"realName-compiled.js","sourcesContent":["/**\n * 手机钱庄\n * @name 实名认证\n * @description 单页js\n * @date 2015-08-03\n */\ndefine(function (require, exports, module) {\n    require('zepto');\n\n    var pageUrl = require('module/ajax-map'),\n        base=require('module/base'),\n        Pop = require('module/dialog'),\n        Verifyfrom = require('module/verifyfrom'),\n        ActivateBtn = require('module/activate-btn'),\n        cookie = require('module/cookie'),\n        verifyRule = require('module/validate-rule'),\n        verifyTips = require('module/validate-tips'),\n        oneSession = require('module/one-session'),\n        Handlebars = require('module/handlebars-helper');\n\n    // 这里没有做路由,而是直接在页面js上载入数据,所以不需要暴露模块接口给路由js调用\n    //module.exports = function () {\n\n    var $pageRealName = $('#pageRealName'),\n        alertPop = new Pop('alert');\n    //--------------------------------------------------【渲染页面】\n    var tpl = __inline('../tpl/pageRealName.tpl');\n    var myTemplate = Handlebars.compile(tpl);\n    $pageRealName.html(myTemplate(null));\n\n    //--------------------------------------------------【激活按钮】\n    var activateBtn = new ActivateBtn({\n        contain: $pageRealName[0]\n    });\n\n    //--------------------------------------------------【表单校验】\n    var verifyfrom = new Verifyfrom();\n\n    // 格式校验\n    verifyfrom.add($('#userName')[0], [{\n        strategy: verifyRule.realName,\n        errorMsg: verifyTips.USER_REALNAME_NAME_FORMAT_ERROR\n    }]);\n    verifyfrom.add($('#identityCard')[0], [{\n        strategy: verifyRule.identityCard,\n        errorMsg: verifyTips.USER_REALNAME_CARDID_FORMAT_ERROR\n    }]);\n    verifyfrom.add($('#dealPassword')[0], [{\n        strategy: verifyRule.dealPasswordLengthMin,\n        errorMsg: verifyTips.USER_REGISTER_PASSWORD_FORMAT_ERROR\n    }, {\n        strategy: verifyRule.dealPasswordLengthMax,\n        errorMsg: verifyTips.USER_REGISTER_PASSWORD_FORMAT_ERROR\n    }]);\n\n    // 表单提交\n    $pageRealName.find('.js-submit').on('click', function () {\n        var userPhone = cookie.getCookie('qz_h5_phone'),\n            userNameVal = $('#userName').val(),\n            identityCardVal = $('#identityCard').val(),\n            dealPasswordVal = $('#dealPassword').val(),\n            errorMsg = verifyfrom.start();\n        if (errorMsg) {\n            alertPop.run(errorMsg);\n            return false;\n        }\n\n        base.ajax({\n            url: pageUrl.certification.url,\n            type: \"post\",\n            data: {\n                'appId': pageUrl.appId,\n                'cardId': base.encryptedPwd(identityCardVal),\n                'payPwd': base.encryptedPwd(dealPasswordVal),\n                'realName': userNameVal,\n                'service': pageUrl.certification.service,\n                'oauthToken':cookie.getCookie('qz_h5_oauthToken'),\n                'userName': base.encryptedPwd(userPhone)\n            },\n            dataType: \"json\",\n            success: function (data) {\n                alertPop.run({\n                    contStr:'实名认证成功',\n                    confirmFunc:function(){\n                        var redirectURL = oneSession.get('redirectURL');\n\n                        if (redirectURL) {\n                            window.location.href = redirectURL;\n                        }else{\n                            window.location.href='index.html#&pageMore';\n                        }\n                    }\n                });\n            },\n            timeout: 10000,\n            error: function () {\n                alertPop.run('请求超时请重新再试');\n            }\n        });\n    });\n    //--------------------------------------------------【暴露接口内存回收】\n    return function () {\n        activateBtn.destroy();\n        alertPop.destroy();\n        verifyfrom.destroy();\n    }\n    //};\n});"]}