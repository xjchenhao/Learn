{"version":3,"sources":["proLoginCheck.js"],"names":[],"mappings":"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","file":"proLoginCheck-compiled.js","sourcesContent":["/**\n * 手机钱庄\n * @name 产品内页检测登录or注册\n * @description 单页js\n * @date 2015-08-13\n */\ndefine(function (require, exports, module) {\n\n    require('zepto');\n    var pageUrl = require('module/ajax-map'),\n        Pop = require('module/dialog'),\n        base=require('module/base'),\n        Mobilebone = require('mobilebone'),\n        Verifyfrom = require('module/verifyfrom'),\n        verifyRule = require('module/validate-rule'),\n        verifyTips = require('module/validate-tips'),\n        ActivateBtn=require('module/activate-btn'),\n        SubmitIng = require('module/submit-ing'),\n        oneSession = require('module/one-session');\n\n    //module.exports = function () {\n        var $pageLoginCheck = $('#pageLoginCheck'),\n            alertPop = new Pop('alert');\n\n        //--------------------------------------------------【手机号只能输入数字】\n        var $userPhone=$('#userPhone');\n\n        $userPhone.on('input',function(){\n            var $this=$(this);\n            $this.val($this.val().replace(/\\D/g,''));\n        });\n\n        //--------------------------------------------------【激活按钮】\n        var activateBtn=new ActivateBtn({\n            contain:$pageLoginCheck[0]\n        });\n\n        //--------------------------------------------------【表单校验】\n        var verifyfrom = new Verifyfrom();\n\n        verifyfrom.add($userPhone[0], [{\n            strategy: verifyRule.phone,\n            errorMsg: verifyTips.USER_REGISTER_PHONE_FORMAT_ERROR\n        }]);\n\n        // 防重复提交\n        var submitIng = new SubmitIng({\n            elmBtn: $pageLoginCheck.find('.js-submit')[0]\n        });\n        $pageLoginCheck.find('.js-submit').on('click', function () {\n\n            var userPhoneVal = $userPhone.val(),\n                errorMsg = verifyfrom.start();    // 运行校验模块,获得错误信息(如果有错误的话)\n\n            // 提交中则跳出\n            if (submitIng.state) {\n                return false\n            } else {\n                submitIng.start('提交中...');\n            }\n\n            // 显示错误提示,跳出submit\n            if (errorMsg) {\n                submitIng.end();\n                alertPop.run(errorMsg);\n                return false;\n            }\n\n            base.ajax({\n                url: pageUrl.phoneCheck.url,\n                type: \"post\",\n                data: {\n                    'userName': base.encryptedPwd(userPhoneVal),\n                    'appId': pageUrl.appId,\n                    'service': pageUrl.phoneCheck.service\n                },\n                dataType: \"json\",\n                success: function (data) {\n                    if (data.resultCode == 0) {\n                        alertPop.run(data.resultMsg);\n                        return false;\n                    }\n                    oneSession.set('userPhone',userPhoneVal);\n                    // 跳转注册\n                    if (data.resultData.phoneExist == 0) {\n                        Mobilebone.transition($('#pageSignIn')[0], $('#pageLoginCheck')[0], {\n                            history: false\n                        });\n\n                        return false;\n                    }\n                    // 跳转登陆\n                    if (data.resultData.phoneExist == 1) {\n                        Mobilebone.transition($('#pageLogin')[0], $('#pageLoginCheck')[0], {\n                            history: false\n                        });\n\n                        return false;\n                    }\n                },\n                timeout: 10000,\n                error: function () {\n                    alertPop.run('请求超时请重新再试');\n                },\n                beforeFunc:function(){\n                    submitIng.end();\n                }\n            });\n\n        });\n        //--------------------------------------------------【暴露接口内存回收】\n    //    return function () {\n    //        $pageLoginCheck.find('.js-submit').off('click');\n    //        activateBtn.destroy();\n    //        alertPop.destroy();\n    //        verifyfrom.destroy();\n    //    }\n    //};\n});"]}