{"version":3,"sources":["editTransPasswordBuy.js"],"names":[],"mappings":"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","file":"editTransPasswordBuy-compiled.js","sourcesContent":["/**\n * 手机钱庄\n * @name 修改交易密码\n * @description 单页js\n * @date 2015-08-04\n */\ndefine(function (require, exports, module) {\n\n    require('zepto');\n    var pageUrl = require('module/ajax-map'),\n        base=require('module/base'),\n        cookie=require('module/cookie'),\n        Pop = require('module/dialog'),\n        Verifyfrom = require('module/verifyfrom'),\n        verifyRule = require('module/validate-rule'),\n        verifyTips = require('module/validate-tips'),\n        SubmitIng = require('module/submit-ing'),\n        ActivateBtn = require('module/activate-btn');\n\n    // 这里没有做路由,而是直接在页面js上载入数据,所以不需要暴露模块接口给路由js调用\n    //module.exports = function () {\n\n    var $pageEditTransPassword=$('#pageEditTransPassword'),\n        $submitBtn=$('#submitBtn');\n\n    //--------------------------------------------------【激活按钮】\n    var activateBtn = new ActivateBtn({\n        contain: $pageEditTransPassword[0]\n    });\n    //--------------------------------------------------【格式校验】\n    var verifyfrom = new Verifyfrom(),\n        alertPop = new Pop('alert');\n\n    verifyfrom.add($('#newPwd')[0], [{\n        strategy: verifyRule.loginPasswordLengthMin,\n        errorMsg: verifyTips.USER_REGISTER_PASSWORD_FORMAT_ERROR\n    }, {\n        strategy: verifyRule.loginPasswordLengthMax,\n        errorMsg: verifyTips.USER_REGISTER_PASSWORD_FORMAT_ERROR\n    }]);\n    //--------------------------------------------------【表单提交】\n\n    // 防重复提交\n    var submitIng = new SubmitIng({\n        elmBtn: $submitBtn[0]\n    });\n\n    $submitBtn.on('click',function(){\n        var oldPwdVal=$('#oldPwd').val(),\n            newPwdVal=$('#newPwd').val(),\n            confirmPwdVal=$('#confirmPwd').val(),\n            errorMsg=verifyfrom.start();    // 运行校验模块,获得错误信息(如果有错误的话)\n\n        // 提交中则跳出\n        if (submitIng.state) {\n            return false\n        } else {\n            submitIng.start('提交中...');\n        }\n\n        // 显示错误提示,跳出submit\n        if (errorMsg) {\n            submitIng.end();\n            alertPop.run(errorMsg);\n            return false;\n        }\n\n        if(newPwdVal!=confirmPwdVal){\n            alertPop.run('两次新密码输入不一致');\n            submitIng.end();\n            return false;\n        }\n\n        base.ajax({\n            url: pageUrl.modifyPayPwd.url,\n            type: \"post\",\n            data: {\n                oauthToken:cookie.getCookie('qz_h5_oauthToken'),\n                appId:pageUrl.appId,\n                service:pageUrl.modifyPayPwd.service,\n                oldPwd:base.encryptedPwd(oldPwdVal),\n                newPwd:base.encryptedPwd(newPwdVal),\n                confirmPwd:base.encryptedPwd(confirmPwdVal)\n            },\n            dataType: \"json\",\n            async: false,\n            success: function (data) {\n                alertPop.run({\n                    contStr:'交易密码修改成功',\n                    confirmFunc:function(){\n                        window.location.href='index.html#&pageMore';\n                    }\n                });\n            },\n            timeout: 10000,\n            error: function () {\n                alertPop.run('请求超时请重新再试');\n            },\n            beforeFunc:function(){\n                submitIng.end();\n            }\n        });\n    });\n    //--------------------------------------------------【暴露接口内存回收】\n    return function () {\n        submitIng.destroy();\n    };\n    //};\n});"]}