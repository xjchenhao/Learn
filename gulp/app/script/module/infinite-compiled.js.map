{"version":3,"sources":["infinite.js"],"names":[],"mappings":"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","file":"infinite-compiled.js","sourcesContent":["/**\n * 无限下拉加载      1.1.8\n * eg:\n * <div id=\"page\">\n *      <ul>\n *          <li>我是文章标题</li>\n *          <li>我是文章标题</li>\n *          <li>我是文章标题</li>\n *          <li>我是文章标题</li>\n *          <li>我是文章标题</li>\n *          <li>我是文章标题</li>\n *      </ul>\n * </div>\n *\n * var infinite = new Infinite({\n *     box: document.getElementById('page'),\n *     con: document.querySelector('#page ul'),\n *     deviation:0,\n *     callback: function () {\n *         var isLoging = false;\n *         $.ajax({\n *             url: \"./ajax/list.json\",\n *             type: \"post\",\n *             dataType: \"json\",\n *             async: false,\n *             success: function (data) {\n *                 var tpl = document.getElementById('pageDate').innerHTML;\n *                 var myTemplate = Handlebars.compile(tpl);\n *                 document.querySelector('#page ul').innerHTML += myTemplate(data);\n *                 isLoging = true;\n *             }\n *         });\n *         return isLoging;\n *     }\n * });\n * Ps:\n *  box              elementObj，对应的容器dom,接收js的元素对象（必填）\n *  con              elementObj，加载数据的容器（必填）\n *  deviation        number,调整滚动条的偏差（特殊情况使用，可无视）\n *  callback         function，滚动到底部的回调函数，需要return true告诉组件数据加载完毕!\n *  destroy          function，销毁对象内存回收\n */\n(function (root, factory) {\n    if (typeof define === 'function' && (define.amd || define.cmd)) {\n        define(function () {\n            return factory(root);\n        });\n    } else {\n        root.Infinite = factory(root, {});\n    }\n})(this, function (root) {\n    var Infinite = function (opts) {\n        this._opts = opts;\n        this._setting();\n        this._bindHandler();\n    };\n    Infinite.prototype._setting = function () {\n        var opts = this._opts;\n\n        /*初始化user data*/\n        this.box = opts.box;\n        this.con = opts.con;\n        this.deviation = opts.deviation || 0;\n        this.callback = opts.callback;\n    };\n    Infinite.prototype._bindHandler = function () {\n        var self = this;\n        self.isLoging = true;\n        self.elBody = document.getElementsByTagName('body')[0];\n        self.isBody = self.box === self.elBody;\n        self.boxHeight = self.box.clientHeight;\n        self.event = {\n            scroll: function (e) {\n                // 对于影藏盒子初始化时 高度为零，为零时 滚动动态计算高度\n                !(self.boxHeight) && (self.boxHeight = self.box.clientHeight);\n                var contentHeight = self.isBody ? self.elBody.scrollHeight : self.con.clientHeight,\n                    scrollY = self.isBody ? self.elBody.scrollTop : Number(e.target.scrollTop);\n                if (scrollY >= contentHeight - self.boxHeight + self.deviation && self.isLoging === true) {\n                    self.isLoging = false;\n                    self.isLoging = self.callback();\n                }\n            }\n        };\n\n        (self.isBody ? document : self.box).addEventListener('scroll', self.event.scroll, false);\n    };\n    Infinite.prototype.destroy = function () {\n        var self = this;\n        if (self.isBody) {\n            self.box.removeEventListener('scroll', self.event.scroll, false);\n        } else {\n            self.box.removeEventListener('scroll', self.event.scroll, false);\n        }\n    };\n    return Infinite;\n});"]}