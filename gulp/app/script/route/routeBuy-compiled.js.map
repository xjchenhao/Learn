{"version":3,"sources":["routeBuy.js"],"names":[],"mappings":"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","file":"routeBuy-compiled.js","sourcesContent":["/**\n * 钱庄网\n * @name 申购流程\n * @description Mobilebone页面路由\n * @date 2015-07-28\n */\ndefine(function (require, exports, module) {\n\n    require('zepto');\n    var base = require('module/base'),\n        Mobilebone = require('mobilebone'),\n        pageUrl = require('module/ajax-map'),\n        Handlebars = require('module/handlebars-helper'),\n        cookie = require('module/cookie'),\n        hrefParameter = require('module/href-parameter');\n\n    Mobilebone.classAnimation = \"fade\";\n    Mobilebone.rootTransition = {\n        proBuyInto: function (pageInto, pageOut, callback) {\n            var tpl = __inline('../tpl/pageBuy.tpl');\n            var myTemplate = Handlebars.compile(tpl);\n\n            base.ajax({\n                url: pageUrl.prepare.url,\n                type: \"post\",\n                data: {\n                    appId: pageUrl.appId,\n                    service: pageUrl.prepare.service,\n                    oauthToken: cookie.getCookie('qz_h5_oauthToken'),\n                    borrowId: hrefParameter.get('borrowId')\n                },\n                dataType: \"json\",\n                async: false,\n                success: function (data) {\n                    $(pageInto).html(myTemplate(data.resultData));\n                }\n            });\n\n            Mobilebone.INTO = require('page/buyAffirm');\n            Mobilebone.OUT = Mobilebone.INTO();\n        },\n        proBuyOut: function (pageInto, pageOut, callback) {\n            Mobilebone.OUT && Mobilebone.OUT();\n        },\n        buyResultInto: function (pageInto, pageOut, callback) {\n            var tpl = __inline('../tpl/pageBuyResult.tpl');\n            var myTemplate = Handlebars.compile(tpl);\n\n            $(pageInto).addClass('ui-load-bg');\n            var searchCount = 0,\n                searchResult = function () {    //递归做查询\n                    base.ajax({\n                        url: pageUrl.tenderResult.url,\n                        type: \"post\",\n                        data: {\n                            appId: pageUrl.appId,\n                            service: pageUrl.tenderResult.service,\n                            oauthToken: cookie.getCookie('qz_h5_oauthToken'),\n                            orderNo: hrefParameter.get('orderNo')\n                        },\n                        dataType: \"json\",\n                        async: false,\n                        success: function (data) {\n                            if(data.resultCode == 2){\n                                if (searchCount < 2 && hrefParameter.get('orderNo')){\n                                    searchCount++;\n                                    setTimeout(searchResult,3000);\n                                    return false;\n                                }\n                            }\n\n                            $(pageInto).removeClass('ui-load-bg');\n                            $(pageInto).html(myTemplate(data.resultData));\n                        }\n                    });\n                };\n\n            searchResult();\n\n            Mobilebone.INTO = require('page/buyResult');\n            Mobilebone.OUT = Mobilebone.INTO();\n        },\n        buyResultOut: function (pageInto, pageOut, callback) {\n            Mobilebone.OUT && Mobilebone.OUT();\n        }\n    };\n    Mobilebone.init();\n});"]}